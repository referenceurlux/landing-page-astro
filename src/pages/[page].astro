---
import "@fontsource-variable/montserrat";
import { WordpressServices } from "../data/wordpress";
import Layout from "../layouts/Layout.astro";
import Header from "../components/header/Header.astro";
import Footer from "../components/footer/Footer.astro";
import About from "../components/about/About.astro";
import Contact from "../components/contact/Contact.astro";
import Cta from "../components/cta/Cta.astro";
import Galerie from "../components/galerie/Galerie.astro";
import Hero from "../components/hero/Hero.astro";
import Infos from "../components/infos/Infos.astro";
import Hero3 from "../components/hero/Hero3.astro";
import HeroSwitcher from "../components/hero/HeroSwitcher.astro";
// export async function getStaticPaths() {
//   const menu = await WordpressServices.getPrimaryMenu();
//   return menu.map((data) => {
//     return {
//       params: { page: data.title },
//     };
//   });
// }

const menu = await WordpressServices.getPrimaryMenu();
const currentPages = menu.map((data) => {
  return {
    slug: data.title,
  };
});

const page = currentPages.find((page) => page.slug === Astro.params.page);
const currentPage = await WordpressServices.getPageBySlug(page.slug);
const template = currentPage.acf.template;

if (!page) return Astro.redirect("/404");
---

<Layout title={page.slug}>
  <Header slug={page.slug} />
  <HeroSwitcher slug={page.slug} />
  <About slug={page.slug} />
  <Infos slug={page.slug} />
  <Cta slug={page.slug} />
  <Galerie slug={page.slug} />
  <Contact slug={page.slug} />
  <Footer slug={page.slug} />
</Layout>
