---
import "@fontsource-variable/montserrat";
import { WordpressServices } from "../data/wordpress";
import Layout from "../layouts/Layout.astro";
import Header from "../components/header/Header.astro";
import Footer from "../components/footer/Footer.astro";
import About from "../components/about/About.astro";
import Contact from "../components/contact/Contact.astro";
import Cta from "../components/cta/Cta.astro";
import Galerie from "../components/galerie/Galerie.astro";
import Hero from "../components/hero/Hero.astro";
import Infos from "../components/infos/Infos.astro";
export async function getStaticPaths() {
  const menu = await WordpressServices.getPrimaryMenu();
  return menu.map((data) => {
    return {
      params: { page: data.title },
    };
  });
}
const { page } = Astro.params;

// const menu = await WordpressServices.getPrimaryMenu();
// const currentPages = menu.map((data) => {
//   return {
//     slug: data.title,
//   };
// });



// const page = currentPages.find((page) => page.slug === Astro.params.page);
// console.log(page);

// if (!page) return Astro.redirect("/404");
---

<Layout title={page}>
  <Hero slug={page} />
  <About slug={page} />
  <Infos slug={page} />
  <Cta slug={page} />
  <Galerie slug={page} />
  <Contact slug={page} />
</Layout> 